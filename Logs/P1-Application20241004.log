2024-10-04 12:50:57.253 -05:00 [INF] Starting up...
2024-10-04 12:54:01.911 -05:00 [INF] Starting up...
2024-10-04 12:55:02.134 -05:00 [INF] Starting up...
2024-10-04 12:56:32.441 -05:00 [INF] Starting up...
2024-10-04 12:57:37.659 -05:00 [INF] Starting up...
2024-10-04 13:08:36.340 -05:00 [INF] Starting up...
2024-10-04 13:11:20.391 -05:00 [INF] Starting up...
2024-10-04 13:14:43.160 -05:00 [INF] Starting up...
2024-10-04 13:15:25.052 -05:00 [INF] Starting up...
2024-10-04 13:16:21.436 -05:00 [INF] Starting up...
2024-10-04 13:18:28.916 -05:00 [INF] Starting up...
2024-10-04 13:18:31.937 -05:00 [INF] Executed DbCommand (905ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:18:31.967 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:18:32.448 -05:00 [INF] Executed DbCommand (449ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:18:32.482 -05:00 [INF] Applying migration '20240913173512_InitialCreate'.
2024-10-04 13:18:32.934 -05:00 [INF] Executed DbCommand (367ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2024-10-04 13:18:33.139 -05:00 [INF] Executed DbCommand (203ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:33.410 -05:00 [INF] Executed DbCommand (267ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUsers` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `DiscordId` int NOT NULL,
    `UserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedUserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `Email` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedEmail` varchar(256) CHARACTER SET utf8mb4 NULL,
    `EmailConfirmed` tinyint(1) NOT NULL,
    `PasswordHash` longtext CHARACTER SET utf8mb4 NULL,
    `SecurityStamp` longtext CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumberConfirmed` tinyint(1) NOT NULL,
    `TwoFactorEnabled` tinyint(1) NOT NULL,
    `LockoutEnd` datetime(6) NULL,
    `LockoutEnabled` tinyint(1) NOT NULL,
    `AccessFailedCount` int NOT NULL,
    CONSTRAINT `PK_AspNetUsers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:33.484 -05:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoleClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoleClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetRoleClaims_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:33.551 -05:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetUserClaims_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:33.676 -05:00 [INF] Executed DbCommand (122ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderKey` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderDisplayName` longtext CHARACTER SET utf8mb4 NULL,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`),
    CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:33.778 -05:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserRoles` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserRoles` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_AspNetUserRoles_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_AspNetUserRoles_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:33.832 -05:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Value` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:34.077 -05:00 [INF] Executed DbCommand (242ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetRoleClaims_RoleId` ON `AspNetRoleClaims` (`RoleId`);
2024-10-04 13:18:34.106 -05:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `RoleNameIndex` ON `AspNetRoles` (`NormalizedName`);
2024-10-04 13:18:34.219 -05:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserClaims_UserId` ON `AspNetUserClaims` (`UserId`);
2024-10-04 13:18:34.279 -05:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserLogins_UserId` ON `AspNetUserLogins` (`UserId`);
2024-10-04 13:18:34.312 -05:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserRoles_RoleId` ON `AspNetUserRoles` (`RoleId`);
2024-10-04 13:18:34.433 -05:00 [INF] Executed DbCommand (119ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `EmailIndex` ON `AspNetUsers` (`NormalizedEmail`);
2024-10-04 13:18:34.523 -05:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `UserNameIndex` ON `AspNetUsers` (`NormalizedUserName`);
2024-10-04 13:18:34.543 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20240913173512_InitialCreate', '8.0.8');
2024-10-04 13:18:34.590 -05:00 [INF] Applying migration '20240917165953_addresulrulecondition'.
2024-10-04 13:18:34.665 -05:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Conditions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Conditions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:34.727 -05:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Results` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Results` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:34.761 -05:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Rules` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `IsEnabled` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Rules` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:34.820 -05:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ConditionRule` (
    `ConditionsId` int NOT NULL,
    `RulesId` int NOT NULL,
    CONSTRAINT `PK_ConditionRule` PRIMARY KEY (`ConditionsId`, `RulesId`),
    CONSTRAINT `FK_ConditionRule_Conditions_ConditionsId` FOREIGN KEY (`ConditionsId`) REFERENCES `Conditions` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_ConditionRule_Rules_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rules` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:34.971 -05:00 [INF] Executed DbCommand (147ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ResultRule` (
    `ResultsId` int NOT NULL,
    `RulesId` int NOT NULL,
    CONSTRAINT `PK_ResultRule` PRIMARY KEY (`ResultsId`, `RulesId`),
    CONSTRAINT `FK_ResultRule_Results_ResultsId` FOREIGN KEY (`ResultsId`) REFERENCES `Results` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_ResultRule_Rules_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rules` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:35.000 -05:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ConditionRule_RulesId` ON `ConditionRule` (`RulesId`);
2024-10-04 13:18:35.050 -05:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ResultRule_RulesId` ON `ResultRule` (`RulesId`);
2024-10-04 13:18:35.057 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20240917165953_addresulrulecondition', '8.0.8');
2024-10-04 13:18:35.060 -05:00 [INF] Applying migration '20240926165822_refinedForRulesSystem'.
2024-10-04 13:18:35.236 -05:00 [INF] Executed DbCommand (124ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_BEFORE_DROP_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID TINYINT(1);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `Extra` = 'auto_increment'
			AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2024-10-04 13:18:35.254 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_AFTER_ADD_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255), IN `COLUMN_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID INT(11);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
			AND `COLUMN_TYPE` LIKE '%int%'
			AND `COLUMN_KEY` = 'PRI';
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL AUTO_INCREMENT;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2024-10-04 13:18:35.275 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` DROP FOREIGN KEY `FK_ConditionRule_Conditions_ConditionsId`;
2024-10-04 13:18:35.300 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` DROP FOREIGN KEY `FK_ConditionRule_Rules_RulesId`;
2024-10-04 13:18:35.317 -05:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ResultRule` DROP FOREIGN KEY `FK_ResultRule_Rules_RulesId`;
2024-10-04 13:18:35.676 -05:00 [INF] Executed DbCommand (357ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CALL POMELO_BEFORE_DROP_PRIMARY_KEY(NULL, 'Rules');
ALTER TABLE `Rules` DROP PRIMARY KEY;
2024-10-04 13:18:36.017 -05:00 [INF] Executed DbCommand (337ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CALL POMELO_BEFORE_DROP_PRIMARY_KEY(NULL, 'Conditions');
ALTER TABLE `Conditions` DROP PRIMARY KEY;
2024-10-04 13:18:36.042 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rules` RENAME `Rule`;
2024-10-04 13:18:36.064 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Conditions` RENAME `Condition`;
2024-10-04 13:18:36.132 -05:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` MODIFY COLUMN `Description` longtext CHARACTER SET utf8mb4 NULL;
2024-10-04 13:18:36.159 -05:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` ADD `CreatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:18:36.188 -05:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` ADD `UpdatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:18:36.213 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` ADD `Value` longtext CHARACTER SET utf8mb4 NOT NULL;
2024-10-04 13:18:36.342 -05:00 [INF] Executed DbCommand (126ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` MODIFY COLUMN `DiscordId` bigint unsigned NOT NULL;
2024-10-04 13:18:36.550 -05:00 [INF] Executed DbCommand (205ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` ADD `UserId` int NOT NULL DEFAULT 0;
2024-10-04 13:18:36.621 -05:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` MODIFY COLUMN `Description` longtext CHARACTER SET utf8mb4 NULL;
2024-10-04 13:18:36.642 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` ADD `CreatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:18:36.663 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` ADD `UpdatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:18:36.725 -05:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` MODIFY COLUMN `Description` longtext CHARACTER SET utf8mb4 NULL;
2024-10-04 13:18:36.751 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `CreatedAt` datetime(6) NOT NULL DEFAULT '0001-01-01 00:00:00';
2024-10-04 13:18:36.772 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `CreatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:18:36.792 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `UpdatedAt` datetime(6) NOT NULL DEFAULT '0001-01-01 00:00:00';
2024-10-04 13:18:36.813 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `UpdatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:18:37.075 -05:00 [INF] Executed DbCommand (260ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` ADD CONSTRAINT `PK_Rule` PRIMARY KEY (`Id`);
CALL POMELO_AFTER_ADD_PRIMARY_KEY(NULL, 'Rule', 'Id');
2024-10-04 13:18:37.378 -05:00 [INF] Executed DbCommand (300ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD CONSTRAINT `PK_Condition` PRIMARY KEY (`Id`);
CALL POMELO_AFTER_ADD_PRIMARY_KEY(NULL, 'Condition', 'Id');
2024-10-04 13:18:37.418 -05:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Item` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_Item` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:37.458 -05:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Triggers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `IsEnabled` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_Triggers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:37.506 -05:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Users` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `DiscordId` bigint unsigned NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_Users` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:37.576 -05:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `RuleTrigger` (
    `RulesId` int NOT NULL,
    `TriggersId` int NOT NULL,
    CONSTRAINT `PK_RuleTrigger` PRIMARY KEY (`RulesId`, `TriggersId`),
    CONSTRAINT `FK_RuleTrigger_Rule_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rule` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_RuleTrigger_Triggers_TriggersId` FOREIGN KEY (`TriggersId`) REFERENCES `Triggers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:37.632 -05:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `UserItem` (
    `UserId` int NOT NULL,
    `ItemId` int NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_UserItem` PRIMARY KEY (`UserId`, `ItemId`),
    CONSTRAINT `FK_UserItem_Item_ItemId` FOREIGN KEY (`ItemId`) REFERENCES `Item` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_UserItem_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:37.729 -05:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `UserMetaData` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_UserMetaData` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_UserMetaData_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:18:37.780 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUsers_UserId` ON `AspNetUsers` (`UserId`);
2024-10-04 13:18:37.808 -05:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_RuleTrigger_TriggersId` ON `RuleTrigger` (`TriggersId`);
2024-10-04 13:18:37.846 -05:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_UserItem_ItemId` ON `UserItem` (`ItemId`);
2024-10-04 13:18:37.871 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_UserMetaData_UserId` ON `UserMetaData` (`UserId`);
2024-10-04 13:18:37.997 -05:00 [INF] Executed DbCommand (123ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` ADD CONSTRAINT `FK_AspNetUsers_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE;
2024-10-04 13:18:38.108 -05:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` ADD CONSTRAINT `FK_ConditionRule_Condition_ConditionsId` FOREIGN KEY (`ConditionsId`) REFERENCES `Condition` (`Id`) ON DELETE CASCADE;
2024-10-04 13:18:38.222 -05:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` ADD CONSTRAINT `FK_ConditionRule_Rule_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rule` (`Id`) ON DELETE CASCADE;
2024-10-04 13:18:38.335 -05:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ResultRule` ADD CONSTRAINT `FK_ResultRule_Rule_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rule` (`Id`) ON DELETE CASCADE;
2024-10-04 13:18:38.346 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20240926165822_refinedForRulesSystem', '8.0.8');
2024-10-04 13:18:38.388 -05:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`;
2024-10-04 13:18:38.398 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`;
2024-10-04 13:31:59.021 -05:00 [INF] Starting up...
2024-10-04 13:32:00.194 -05:00 [INF] Executed DbCommand (153ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:32:00.208 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:32:00.228 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:32:00.243 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:34:43.435 -05:00 [INF] Starting up...
2024-10-04 13:34:44.489 -05:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:34:44.516 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:34:44.533 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:34:44.547 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:36:58.034 -05:00 [INF] Starting up...
2024-10-04 13:36:59.788 -05:00 [INF] Executed DbCommand (289ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:36:59.809 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:36:59.857 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:36:59.881 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:38:25.019 -05:00 [INF] Starting up...
2024-10-04 13:38:26.119 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:38:26.135 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:38:26.150 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:38:26.166 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:40:58.630 -05:00 [INF] Starting up...
2024-10-04 13:40:59.579 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:40:59.597 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:40:59.615 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:40:59.630 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:42:48.883 -05:00 [INF] Starting up...
2024-10-04 13:42:49.834 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:42:49.849 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:42:49.865 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:42:49.880 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:45:16.346 -05:00 [INF] Starting up...
2024-10-04 13:45:17.315 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:45:17.330 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:45:17.345 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:45:17.359 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:46:44.325 -05:00 [INF] Starting up...
2024-10-04 13:46:45.361 -05:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:46:45.375 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:46:45.416 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:46:45.430 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:49:04.733 -05:00 [INF] Starting up...
2024-10-04 13:49:05.755 -05:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:49:05.770 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:49:05.786 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:49:05.800 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:51:08.146 -05:00 [INF] Starting up...
2024-10-04 13:52:27.963 -05:00 [INF] Starting up...
2024-10-04 13:53:57.144 -05:00 [INF] Starting up...
2024-10-04 13:53:58.282 -05:00 [INF] Executed DbCommand (133ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:53:58.296 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:53:58.311 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:53:58.326 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:54:00.808 -05:00 [INF] Executed DbCommand (2,198ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE `P1`;
2024-10-04 13:54:38.233 -05:00 [INF] Starting up...
2024-10-04 13:54:39.395 -05:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE `P1`;
2024-10-04 13:54:39.531 -05:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:39.549 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:54:39.557 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:54:39.575 -05:00 [INF] Applying migration '20240913173512_InitialCreate'.
2024-10-04 13:54:39.721 -05:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2024-10-04 13:54:39.762 -05:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:39.856 -05:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUsers` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `DiscordId` int NOT NULL,
    `UserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedUserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `Email` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedEmail` varchar(256) CHARACTER SET utf8mb4 NULL,
    `EmailConfirmed` tinyint(1) NOT NULL,
    `PasswordHash` longtext CHARACTER SET utf8mb4 NULL,
    `SecurityStamp` longtext CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumberConfirmed` tinyint(1) NOT NULL,
    `TwoFactorEnabled` tinyint(1) NOT NULL,
    `LockoutEnd` datetime(6) NULL,
    `LockoutEnabled` tinyint(1) NOT NULL,
    `AccessFailedCount` int NOT NULL,
    CONSTRAINT `PK_AspNetUsers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:39.960 -05:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoleClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoleClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetRoleClaims_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:40.046 -05:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetUserClaims_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:40.107 -05:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderKey` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderDisplayName` longtext CHARACTER SET utf8mb4 NULL,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`),
    CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:40.185 -05:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserRoles` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserRoles` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_AspNetUserRoles_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_AspNetUserRoles_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:40.511 -05:00 [INF] Executed DbCommand (321ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Value` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:40.631 -05:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetRoleClaims_RoleId` ON `AspNetRoleClaims` (`RoleId`);
2024-10-04 13:54:40.696 -05:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `RoleNameIndex` ON `AspNetRoles` (`NormalizedName`);
2024-10-04 13:54:40.759 -05:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserClaims_UserId` ON `AspNetUserClaims` (`UserId`);
2024-10-04 13:54:40.797 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserLogins_UserId` ON `AspNetUserLogins` (`UserId`);
2024-10-04 13:54:40.832 -05:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserRoles_RoleId` ON `AspNetUserRoles` (`RoleId`);
2024-10-04 13:54:40.867 -05:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `EmailIndex` ON `AspNetUsers` (`NormalizedEmail`);
2024-10-04 13:54:40.907 -05:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `UserNameIndex` ON `AspNetUsers` (`NormalizedUserName`);
2024-10-04 13:54:40.914 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20240913173512_InitialCreate', '8.0.8');
2024-10-04 13:54:40.917 -05:00 [INF] Applying migration '20240917165953_addresulrulecondition'.
2024-10-04 13:54:40.975 -05:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Conditions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Conditions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:41.021 -05:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Results` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Results` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:41.132 -05:00 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Rules` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `IsEnabled` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Rules` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:41.191 -05:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ConditionRule` (
    `ConditionsId` int NOT NULL,
    `RulesId` int NOT NULL,
    CONSTRAINT `PK_ConditionRule` PRIMARY KEY (`ConditionsId`, `RulesId`),
    CONSTRAINT `FK_ConditionRule_Conditions_ConditionsId` FOREIGN KEY (`ConditionsId`) REFERENCES `Conditions` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_ConditionRule_Rules_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rules` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:41.258 -05:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ResultRule` (
    `ResultsId` int NOT NULL,
    `RulesId` int NOT NULL,
    CONSTRAINT `PK_ResultRule` PRIMARY KEY (`ResultsId`, `RulesId`),
    CONSTRAINT `FK_ResultRule_Results_ResultsId` FOREIGN KEY (`ResultsId`) REFERENCES `Results` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_ResultRule_Rules_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rules` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:41.307 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ConditionRule_RulesId` ON `ConditionRule` (`RulesId`);
2024-10-04 13:54:41.343 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ResultRule_RulesId` ON `ResultRule` (`RulesId`);
2024-10-04 13:54:41.353 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20240917165953_addresulrulecondition', '8.0.8');
2024-10-04 13:54:41.356 -05:00 [INF] Applying migration '20240926165822_refinedForRulesSystem'.
2024-10-04 13:54:41.425 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_BEFORE_DROP_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID TINYINT(1);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `Extra` = 'auto_increment'
			AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2024-10-04 13:54:41.449 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_AFTER_ADD_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255), IN `COLUMN_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID INT(11);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
			AND `COLUMN_TYPE` LIKE '%int%'
			AND `COLUMN_KEY` = 'PRI';
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL AUTO_INCREMENT;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2024-10-04 13:54:41.470 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` DROP FOREIGN KEY `FK_ConditionRule_Conditions_ConditionsId`;
2024-10-04 13:54:41.486 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` DROP FOREIGN KEY `FK_ConditionRule_Rules_RulesId`;
2024-10-04 13:54:41.499 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ResultRule` DROP FOREIGN KEY `FK_ResultRule_Rules_RulesId`;
2024-10-04 13:54:41.710 -05:00 [INF] Executed DbCommand (208ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CALL POMELO_BEFORE_DROP_PRIMARY_KEY(NULL, 'Rules');
ALTER TABLE `Rules` DROP PRIMARY KEY;
2024-10-04 13:54:41.879 -05:00 [INF] Executed DbCommand (166ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CALL POMELO_BEFORE_DROP_PRIMARY_KEY(NULL, 'Conditions');
ALTER TABLE `Conditions` DROP PRIMARY KEY;
2024-10-04 13:54:41.899 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rules` RENAME `Rule`;
2024-10-04 13:54:41.967 -05:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Conditions` RENAME `Condition`;
2024-10-04 13:54:42.054 -05:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` MODIFY COLUMN `Description` longtext CHARACTER SET utf8mb4 NULL;
2024-10-04 13:54:42.084 -05:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` ADD `CreatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:54:42.107 -05:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` ADD `UpdatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:54:42.133 -05:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` ADD `Value` longtext CHARACTER SET utf8mb4 NOT NULL;
2024-10-04 13:54:42.271 -05:00 [INF] Executed DbCommand (134ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` MODIFY COLUMN `DiscordId` bigint unsigned NOT NULL;
2024-10-04 13:54:42.308 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` ADD `UserId` int NOT NULL DEFAULT 0;
2024-10-04 13:54:42.389 -05:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` MODIFY COLUMN `Description` longtext CHARACTER SET utf8mb4 NULL;
2024-10-04 13:54:42.412 -05:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` ADD `CreatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:54:42.436 -05:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` ADD `UpdatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:54:42.605 -05:00 [INF] Executed DbCommand (167ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` MODIFY COLUMN `Description` longtext CHARACTER SET utf8mb4 NULL;
2024-10-04 13:54:42.645 -05:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `CreatedAt` datetime(6) NOT NULL DEFAULT '0001-01-01 00:00:00';
2024-10-04 13:54:42.667 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `CreatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:54:42.693 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `UpdatedAt` datetime(6) NOT NULL DEFAULT '0001-01-01 00:00:00';
2024-10-04 13:54:42.715 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `UpdatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:54:42.865 -05:00 [INF] Executed DbCommand (148ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` ADD CONSTRAINT `PK_Rule` PRIMARY KEY (`Id`);
CALL POMELO_AFTER_ADD_PRIMARY_KEY(NULL, 'Rule', 'Id');
2024-10-04 13:54:43.038 -05:00 [INF] Executed DbCommand (170ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD CONSTRAINT `PK_Condition` PRIMARY KEY (`Id`);
CALL POMELO_AFTER_ADD_PRIMARY_KEY(NULL, 'Condition', 'Id');
2024-10-04 13:54:43.076 -05:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Item` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_Item` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:43.141 -05:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Triggers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `IsEnabled` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_Triggers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:43.179 -05:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Users` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `DiscordId` bigint unsigned NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_Users` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:43.251 -05:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `RuleTrigger` (
    `RulesId` int NOT NULL,
    `TriggersId` int NOT NULL,
    CONSTRAINT `PK_RuleTrigger` PRIMARY KEY (`RulesId`, `TriggersId`),
    CONSTRAINT `FK_RuleTrigger_Rule_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rule` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_RuleTrigger_Triggers_TriggersId` FOREIGN KEY (`TriggersId`) REFERENCES `Triggers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:43.306 -05:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `UserItem` (
    `UserId` int NOT NULL,
    `ItemId` int NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_UserItem` PRIMARY KEY (`UserId`, `ItemId`),
    CONSTRAINT `FK_UserItem_Item_ItemId` FOREIGN KEY (`ItemId`) REFERENCES `Item` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_UserItem_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:43.368 -05:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `UserMetaData` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_UserMetaData` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_UserMetaData_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:54:43.418 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUsers_UserId` ON `AspNetUsers` (`UserId`);
2024-10-04 13:54:43.448 -05:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_RuleTrigger_TriggersId` ON `RuleTrigger` (`TriggersId`);
2024-10-04 13:54:43.485 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_UserItem_ItemId` ON `UserItem` (`ItemId`);
2024-10-04 13:54:43.538 -05:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_UserMetaData_UserId` ON `UserMetaData` (`UserId`);
2024-10-04 13:54:43.701 -05:00 [INF] Executed DbCommand (151ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` ADD CONSTRAINT `FK_AspNetUsers_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE;
2024-10-04 13:54:43.862 -05:00 [INF] Executed DbCommand (158ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` ADD CONSTRAINT `FK_ConditionRule_Condition_ConditionsId` FOREIGN KEY (`ConditionsId`) REFERENCES `Condition` (`Id`) ON DELETE CASCADE;
2024-10-04 13:54:43.972 -05:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` ADD CONSTRAINT `FK_ConditionRule_Rule_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rule` (`Id`) ON DELETE CASCADE;
2024-10-04 13:54:44.088 -05:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ResultRule` ADD CONSTRAINT `FK_ResultRule_Rule_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rule` (`Id`) ON DELETE CASCADE;
2024-10-04 13:54:44.095 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20240926165822_refinedForRulesSystem', '8.0.8');
2024-10-04 13:54:44.107 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`;
2024-10-04 13:54:44.116 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`;
2024-10-04 13:56:07.281 -05:00 [INF] Starting up...
2024-10-04 13:56:08.344 -05:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:56:08.360 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:56:08.379 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:56:08.395 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:56:08.460 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:56:08.467 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:56:08.472 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:56:08.475 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:56:44.193 -05:00 [INF] Starting up...
2024-10-04 13:56:45.176 -05:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:56:45.190 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:56:45.205 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:56:45.219 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 13:56:45.808 -05:00 [INF] Executed DbCommand (531ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE `P1`;
2024-10-04 13:56:58.188 -05:00 [INF] Starting up...
2024-10-04 13:56:59.740 -05:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE `P1`;
2024-10-04 13:56:59.868 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:56:59.885 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 13:56:59.888 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 13:56:59.901 -05:00 [INF] Applying migration '20240913173512_InitialCreate'.
2024-10-04 13:56:59.938 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2024-10-04 13:56:59.971 -05:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:00.004 -05:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUsers` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `DiscordId` int NOT NULL,
    `UserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedUserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `Email` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedEmail` varchar(256) CHARACTER SET utf8mb4 NULL,
    `EmailConfirmed` tinyint(1) NOT NULL,
    `PasswordHash` longtext CHARACTER SET utf8mb4 NULL,
    `SecurityStamp` longtext CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumberConfirmed` tinyint(1) NOT NULL,
    `TwoFactorEnabled` tinyint(1) NOT NULL,
    `LockoutEnd` datetime(6) NULL,
    `LockoutEnabled` tinyint(1) NOT NULL,
    `AccessFailedCount` int NOT NULL,
    CONSTRAINT `PK_AspNetUsers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:00.057 -05:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoleClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoleClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetRoleClaims_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:00.113 -05:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetUserClaims_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:00.197 -05:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderKey` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderDisplayName` longtext CHARACTER SET utf8mb4 NULL,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`),
    CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:00.459 -05:00 [INF] Executed DbCommand (261ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserRoles` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserRoles` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_AspNetUserRoles_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_AspNetUserRoles_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:00.587 -05:00 [INF] Executed DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Value` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:00.701 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetRoleClaims_RoleId` ON `AspNetRoleClaims` (`RoleId`);
2024-10-04 13:57:00.761 -05:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `RoleNameIndex` ON `AspNetRoles` (`NormalizedName`);
2024-10-04 13:57:00.790 -05:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserClaims_UserId` ON `AspNetUserClaims` (`UserId`);
2024-10-04 13:57:00.823 -05:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserLogins_UserId` ON `AspNetUserLogins` (`UserId`);
2024-10-04 13:57:00.853 -05:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserRoles_RoleId` ON `AspNetUserRoles` (`RoleId`);
2024-10-04 13:57:00.887 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `EmailIndex` ON `AspNetUsers` (`NormalizedEmail`);
2024-10-04 13:57:00.922 -05:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `UserNameIndex` ON `AspNetUsers` (`NormalizedUserName`);
2024-10-04 13:57:00.926 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20240913173512_InitialCreate', '8.0.8');
2024-10-04 13:57:00.927 -05:00 [INF] Applying migration '20240917165953_addresulrulecondition'.
2024-10-04 13:57:00.994 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Conditions` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Conditions` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:01.038 -05:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Results` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Results` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:01.066 -05:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Rules` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `IsEnabled` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Rules` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:01.131 -05:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ConditionRule` (
    `ConditionsId` int NOT NULL,
    `RulesId` int NOT NULL,
    CONSTRAINT `PK_ConditionRule` PRIMARY KEY (`ConditionsId`, `RulesId`),
    CONSTRAINT `FK_ConditionRule_Conditions_ConditionsId` FOREIGN KEY (`ConditionsId`) REFERENCES `Conditions` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_ConditionRule_Rules_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rules` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:01.337 -05:00 [INF] Executed DbCommand (206ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ResultRule` (
    `ResultsId` int NOT NULL,
    `RulesId` int NOT NULL,
    CONSTRAINT `PK_ResultRule` PRIMARY KEY (`ResultsId`, `RulesId`),
    CONSTRAINT `FK_ResultRule_Results_ResultsId` FOREIGN KEY (`ResultsId`) REFERENCES `Results` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_ResultRule_Rules_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rules` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:01.360 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ConditionRule_RulesId` ON `ConditionRule` (`RulesId`);
2024-10-04 13:57:01.387 -05:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ResultRule_RulesId` ON `ResultRule` (`RulesId`);
2024-10-04 13:57:01.391 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20240917165953_addresulrulecondition', '8.0.8');
2024-10-04 13:57:01.391 -05:00 [INF] Applying migration '20240926165822_refinedForRulesSystem'.
2024-10-04 13:57:01.454 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_BEFORE_DROP_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID TINYINT(1);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `Extra` = 'auto_increment'
			AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2024-10-04 13:57:01.475 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_AFTER_ADD_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255), IN `COLUMN_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID INT(11);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
			AND `COLUMN_TYPE` LIKE '%int%'
			AND `COLUMN_KEY` = 'PRI';
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL AUTO_INCREMENT;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2024-10-04 13:57:01.485 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` DROP FOREIGN KEY `FK_ConditionRule_Conditions_ConditionsId`;
2024-10-04 13:57:01.500 -05:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` DROP FOREIGN KEY `FK_ConditionRule_Rules_RulesId`;
2024-10-04 13:57:01.510 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ResultRule` DROP FOREIGN KEY `FK_ResultRule_Rules_RulesId`;
2024-10-04 13:57:01.682 -05:00 [INF] Executed DbCommand (172ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CALL POMELO_BEFORE_DROP_PRIMARY_KEY(NULL, 'Rules');
ALTER TABLE `Rules` DROP PRIMARY KEY;
2024-10-04 13:57:01.851 -05:00 [INF] Executed DbCommand (169ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CALL POMELO_BEFORE_DROP_PRIMARY_KEY(NULL, 'Conditions');
ALTER TABLE `Conditions` DROP PRIMARY KEY;
2024-10-04 13:57:01.872 -05:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rules` RENAME `Rule`;
2024-10-04 13:57:01.893 -05:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Conditions` RENAME `Condition`;
2024-10-04 13:57:01.963 -05:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` MODIFY COLUMN `Description` longtext CHARACTER SET utf8mb4 NULL;
2024-10-04 13:57:02.006 -05:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` ADD `CreatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:57:02.068 -05:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` ADD `UpdatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:57:02.094 -05:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Results` ADD `Value` longtext CHARACTER SET utf8mb4 NOT NULL;
2024-10-04 13:57:02.268 -05:00 [INF] Executed DbCommand (174ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` MODIFY COLUMN `DiscordId` bigint unsigned NOT NULL;
2024-10-04 13:57:02.305 -05:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` ADD `UserId` int NOT NULL DEFAULT 0;
2024-10-04 13:57:02.373 -05:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` MODIFY COLUMN `Description` longtext CHARACTER SET utf8mb4 NULL;
2024-10-04 13:57:02.406 -05:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` ADD `CreatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:57:02.428 -05:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` ADD `UpdatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:57:02.487 -05:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` MODIFY COLUMN `Description` longtext CHARACTER SET utf8mb4 NULL;
2024-10-04 13:57:02.505 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `CreatedAt` datetime(6) NOT NULL DEFAULT '0001-01-01 00:00:00';
2024-10-04 13:57:02.522 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `CreatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:57:02.539 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `UpdatedAt` datetime(6) NOT NULL DEFAULT '0001-01-01 00:00:00';
2024-10-04 13:57:02.562 -05:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD `UpdatedBy` int NOT NULL DEFAULT 0;
2024-10-04 13:57:02.716 -05:00 [INF] Executed DbCommand (154ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Rule` ADD CONSTRAINT `PK_Rule` PRIMARY KEY (`Id`);
CALL POMELO_AFTER_ADD_PRIMARY_KEY(NULL, 'Rule', 'Id');
2024-10-04 13:57:02.893 -05:00 [INF] Executed DbCommand (177ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Condition` ADD CONSTRAINT `PK_Condition` PRIMARY KEY (`Id`);
CALL POMELO_AFTER_ADD_PRIMARY_KEY(NULL, 'Condition', 'Id');
2024-10-04 13:57:02.940 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Item` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_Item` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:02.981 -05:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Triggers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `IsEnabled` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_Triggers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:03.015 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Users` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `DiscordId` bigint unsigned NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_Users` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:03.076 -05:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `RuleTrigger` (
    `RulesId` int NOT NULL,
    `TriggersId` int NOT NULL,
    CONSTRAINT `PK_RuleTrigger` PRIMARY KEY (`RulesId`, `TriggersId`),
    CONSTRAINT `FK_RuleTrigger_Rule_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rule` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_RuleTrigger_Triggers_TriggersId` FOREIGN KEY (`TriggersId`) REFERENCES `Triggers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:03.128 -05:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `UserItem` (
    `UserId` int NOT NULL,
    `ItemId` int NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_UserItem` PRIMARY KEY (`UserId`, `ItemId`),
    CONSTRAINT `FK_UserItem_Item_ItemId` FOREIGN KEY (`ItemId`) REFERENCES `Item` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_UserItem_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:03.181 -05:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `UserMetaData` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `CreatedBy` int NOT NULL,
    `UpdatedAt` datetime(6) NOT NULL,
    `UpdatedBy` int NOT NULL,
    CONSTRAINT `PK_UserMetaData` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_UserMetaData_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2024-10-04 13:57:03.221 -05:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUsers_UserId` ON `AspNetUsers` (`UserId`);
2024-10-04 13:57:03.249 -05:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_RuleTrigger_TriggersId` ON `RuleTrigger` (`TriggersId`);
2024-10-04 13:57:03.288 -05:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_UserItem_ItemId` ON `UserItem` (`ItemId`);
2024-10-04 13:57:03.321 -05:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_UserMetaData_UserId` ON `UserMetaData` (`UserId`);
2024-10-04 13:57:03.462 -05:00 [INF] Executed DbCommand (141ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` ADD CONSTRAINT `FK_AspNetUsers_Users_UserId` FOREIGN KEY (`UserId`) REFERENCES `Users` (`Id`) ON DELETE CASCADE;
2024-10-04 13:57:03.568 -05:00 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` ADD CONSTRAINT `FK_ConditionRule_Condition_ConditionsId` FOREIGN KEY (`ConditionsId`) REFERENCES `Condition` (`Id`) ON DELETE CASCADE;
2024-10-04 13:57:03.664 -05:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ConditionRule` ADD CONSTRAINT `FK_ConditionRule_Rule_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rule` (`Id`) ON DELETE CASCADE;
2024-10-04 13:57:03.758 -05:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ResultRule` ADD CONSTRAINT `FK_ResultRule_Rule_RulesId` FOREIGN KEY (`RulesId`) REFERENCES `Rule` (`Id`) ON DELETE CASCADE;
2024-10-04 13:57:03.762 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20240926165822_refinedForRulesSystem', '8.0.8');
2024-10-04 13:57:03.770 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`;
2024-10-04 13:57:03.777 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`;
2024-10-04 13:57:04.091 -05:00 [INF] User profile is available. Using 'C:\Users\megaf\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-04 13:57:04.348 -05:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2024-10-04 13:57:04.351 -05:00 [ERR] Hosting failed to start
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2024-10-04 14:03:52.841 -05:00 [INF] Starting up...
2024-10-04 14:03:53.989 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:03:54.003 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:03:54.015 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 14:03:54.031 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 14:04:32.261 -05:00 [INF] Starting up...
2024-10-04 14:04:33.388 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:04:33.402 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:04:33.415 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 14:04:33.427 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 14:04:33.518 -05:00 [INF] User profile is available. Using 'C:\Users\megaf\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-04 14:04:33.563 -05:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2024-10-04 14:04:33.566 -05:00 [ERR] Hosting failed to start
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2024-10-04 14:09:28.008 -05:00 [INF] Starting up...
2024-10-04 14:09:29.071 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:09:29.086 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:09:29.099 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 14:09:29.112 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 14:09:29.211 -05:00 [INF] User profile is available. Using 'C:\Users\megaf\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-04 14:09:29.257 -05:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2024-10-04 14:09:29.264 -05:00 [ERR] Hosting failed to start
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2024-10-04 14:12:35.077 -05:00 [INF] Starting up...
2024-10-04 14:12:36.233 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:12:36.246 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:12:36.258 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 14:12:36.269 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 14:12:36.359 -05:00 [INF] User profile is available. Using 'C:\Users\megaf\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-04 14:12:36.435 -05:00 [INF] Now listening on: http://localhost:5252
2024-10-04 14:12:36.438 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-04 14:12:36.438 -05:00 [INF] Hosting environment: Development
2024-10-04 14:12:36.438 -05:00 [INF] Content root path: F:\GameDev Projects\P1OC\P1 Discord Bot\Back End\CSBotBackend\P1-Api
2024-10-04 14:12:36.879 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/ - null null
2024-10-04 14:12:36.900 -05:00 [WRN] Failed to determine the https port for redirect.
2024-10-04 14:12:37.003 -05:00 [ERR] An unhandled exception occurred during the request.
System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Http.DefaultHttpResponse' to type 'Microsoft.AspNetCore.Mvc.IActionResult'.
   at P1_Api.ErrorHandling.ExceptionBarrierMiddleware.InvokeAsync(HttpContext context) in F:\GameDev Projects\P1OC\P1 Discord Bot\Back End\CSBotBackend\P1-Api\ErrorHandling\ExceptionBarrierMiddleware.cs:line 28
2024-10-04 14:12:37.024 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Http.DefaultHttpResponse' to type 'Microsoft.AspNetCore.Mvc.IActionResult'.
   at P1_Api.ErrorHandling.ExceptionBarrierMiddleware.HandleExceptionAsync(HttpContext context, Exception e) in F:\GameDev Projects\P1OC\P1 Discord Bot\Back End\CSBotBackend\P1-Api\ErrorHandling\ExceptionBarrierMiddleware.cs:line 61
   at P1_Api.ErrorHandling.ExceptionBarrierMiddleware.InvokeAsync(HttpContext context) in F:\GameDev Projects\P1OC\P1 Discord Bot\Back End\CSBotBackend\P1-Api\ErrorHandling\ExceptionBarrierMiddleware.cs:line 33
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-10-04 14:12:37.025 -05:00 [WRN] The response has already started, the error page middleware will not be executed.
2024-10-04 14:12:37.033 -05:00 [ERR] Connection id "0HN74L211JUE5", Request id "0HN74L211JUE5:00000001": An unhandled exception was thrown by the application.
System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Http.DefaultHttpResponse' to type 'Microsoft.AspNetCore.Mvc.IActionResult'.
   at P1_Api.ErrorHandling.ExceptionBarrierMiddleware.HandleExceptionAsync(HttpContext context, Exception e) in F:\GameDev Projects\P1OC\P1 Discord Bot\Back End\CSBotBackend\P1-Api\ErrorHandling\ExceptionBarrierMiddleware.cs:line 61
   at P1_Api.ErrorHandling.ExceptionBarrierMiddleware.InvokeAsync(HttpContext context) in F:\GameDev Projects\P1OC\P1 Discord Bot\Back End\CSBotBackend\P1-Api\ErrorHandling\ExceptionBarrierMiddleware.cs:line 33
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2024-10-04 14:12:37.035 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/ - 500 null application/json 156.7475ms
2024-10-04 14:17:47.699 -05:00 [INF] Starting up...
2024-10-04 14:17:49.467 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:17:49.482 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='P1' AND TABLE_NAME='__EFMigrationsHistory';
2024-10-04 14:17:49.498 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2024-10-04 14:17:49.513 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-10-04 14:17:49.641 -05:00 [INF] User profile is available. Using 'C:\Users\megaf\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-04 14:17:49.694 -05:00 [INF] Now listening on: http://localhost:5252
2024-10-04 14:17:49.697 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-04 14:17:49.697 -05:00 [INF] Hosting environment: Development
2024-10-04 14:17:49.698 -05:00 [INF] Content root path: F:\GameDev Projects\P1OC\P1 Discord Bot\Back End\CSBotBackend\P1-Api
2024-10-04 14:17:49.975 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/ - null null
2024-10-04 14:17:50.003 -05:00 [WRN] Failed to determine the https port for redirect.
2024-10-04 14:17:50.039 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/ - 301 0 null 65.8776ms
2024-10-04 14:17:50.233 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/index.html - null null
2024-10-04 14:17:50.717 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/index.html - 200 null text/html;charset=utf-8 484.1735ms
2024-10-04 14:17:50.767 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/swagger-ui.css - null null
2024-10-04 14:17:50.780 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/index.css - null null
2024-10-04 14:17:50.780 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/swagger-ui-bundle.js - null null
2024-10-04 14:17:50.780 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/swagger-ui-standalone-preset.js - null null
2024-10-04 14:17:50.781 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/index.js - null null
2024-10-04 14:17:50.794 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/index.js - 200 null application/javascript;charset=utf-8 12.7429ms
2024-10-04 14:17:50.811 -05:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2024-10-04 14:17:50.811 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/index.css - 200 202 text/css 31.2849ms
2024-10-04 14:17:50.835 -05:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-10-04 14:17:50.837 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/swagger-ui.css - 200 152034 text/css 70.2651ms
2024-10-04 14:17:50.842 -05:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-10-04 14:17:50.843 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/swagger-ui-standalone-preset.js - 200 230293 text/javascript 62.6723ms
2024-10-04 14:17:50.869 -05:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-10-04 14:17:50.869 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/swagger-ui-bundle.js - 200 1452753 text/javascript 89.9017ms
2024-10-04 14:17:51.325 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/swagger/v1/swagger.json - null null
2024-10-04 14:17:51.357 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5252/favicon-32x32.png - null null
2024-10-04 14:17:51.358 -05:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-10-04 14:17:51.358 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/favicon-32x32.png - 200 628 image/png 1.3845ms
2024-10-04 14:17:51.542 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5252/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 217.4955ms
